pipeline{
    agent any
    tools{
        nodejs "node"
    }
    stages{
        stage("node version"){
            steps{
                sh 'node --version'
            }
        }
        stage("Clone repo"){
            steps{
                git(
                   url: "https://github.com/ChepkemoiPeris/gallery.git",
                   branch: "master"
               )

            }
        }
         
        stage("Install npm"){
            steps{
                sh 'npm install'
            }
        }
      stage('Tests'){
           steps{
                echo "Running tests"
           }
       }
       
    stage('Deploy to Render'){
      
      steps{
           withCredentials([string(credentialsId: 'render-deploy-hook', variable: 'RENDER_DEPLOY_HOOK')]) {
                    sh """
                    curl -X POST ${RENDER_DEPLOY_HOOK}
                    """
                } 
         }
       }



    }
}